
jobs:

- job: "LinuxPythonDebug"
  displayName: "Ubuntu build - python make - debug"
  pool:
    vmImage: "Ubuntu-16.04"
  steps:
    - script: python scripts/mk_make.py -d --java --dotnet
    - script: |
        cd build
        make
        make examples
        ls
        ./cpp_example
        ./c_example
        make test-z3
        ./test-z3 -a      
        cd ..     
    - script: git clone https://github.com/z3prover/z3test z3test
    - script: python z3test/scripts/test_benchmarks.py build/z3 z3test/regressions/smt2    


# TBD: specify a matrix of options that are used in the cmake line.

- job: "LinuxCMake"
  displayName: "Ubuntu build - cmake"
  pool:
    vmImage: "Ubuntu-16.04"
  steps:
    - script: |
        mkdir build
        cd build
        CC=clang CXX=clang++ cmake -DBUILD_DOTNET_BINDINGS=True -DBUILD_JAVA_BINDINGS=True -G "Ninja" ../
        ninja
        ninja test-z3
        ninja examples
        ./test-z3 -a
        cd ..
    - script: git clone https://github.com/z3prover/z3test z3test
    - script: python z3test/scripts/test_benchmarks.py build/z3 z3test/regressions/smt2    


- job: "Windows2017"
  displayName: "Windows 2017 build"
  pool:
    vmImage: "vs2017-win2016"
  steps:
    - script: scripts\vsts-vs2017.cmd x64

# TBD add job for Mac build/test 








