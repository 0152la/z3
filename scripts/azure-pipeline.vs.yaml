pool:
  vmImage: "vs2017-win2016"


steps:

- script: git clone https://github.com/z3prover/bin bin
  
- task: DotNetCoreInstaller@0
  displayName: 'Use .NET Core sdk 2.1'
  inputs:
    version: 2.1.300

- task: DownloadSecureFile@1
  inputs:
    secureFile: 'z3.snk'

- script: scripts\mk_win_dist.cmd

- task: GitHubRelease@0
  inputs:
    repositoryName: '$(Build.Repository.Name)'
    action: 'edit'
    target: '$(Build.SourceVersion)'
    tag: 'nightly'
    title: 'nightly'
    releaseNotesSource: 'input'
    releaseNotes: 'nightly build'
    isDraft: true
    isPreRelease: true

