pool:
  vmImage: "ubuntu-16.04"

steps:

- task: DotNetCoreInstaller@0
  displayName: 'Use .NET Core sdk 2.1'
  inputs:
    version: 2.1.300

- task: DownloadSecureFile@1
  inputs:
    secureFile: 'z3.snk'

- script: python scripts/mk_unix_dist.py --dotnet-key=$(Agent.TempDirectory)/z3.snk

- script: cp dist/*.zip $(Build.ArtifactStagingDirectory)/.

- task: GitHubRelease@0
  inputs:
    gitHubConnection: Z3GitHub
    repositoryName: 'Z3Prover/z3'
    action: 'edit'
    target: '$(Build.SourceVersion)'
    tagSource: 'manual'
    tag: 'NightlyUbuntu'
    title: 'Nightly Ubuntu'
    releaseNotesSource: 'input'
    releaseNotes: 'nightly build'
    isDraft: false
    isPreRelease: true




